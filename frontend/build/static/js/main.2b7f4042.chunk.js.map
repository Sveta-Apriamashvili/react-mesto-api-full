{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","utils/api.js","utils/auth.js","components/ImagePopup.js","components/Login.js","components/Register.js","images/success.svg","images/error.svg","components/InfoTooltip.js","components/ProtectedRoute.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","props","className","src","logo","alt","path","to","exact","userEmail","onClick","onSignOut","defaultInfo","name","about","avatar","_id","CurrentUserContext","React","createContext","Card","currentUser","useContext","isOwn","card","owner","cardDeleteButtonClassName","isLiked","likes","some","i","cardLikeButtonClassName","type","aria-label","onCardDelete","link","onCardClick","onCardLike","length","Main","useState","isMouseOverAvatar","setIsMouseOverAvatar","onMouseEnter","onEditAvatar","onMouseLeave","onEditProfile","onAddPlace","cards","map","item","Footer","PopupWithForm","isOpen","onClose","title","onSubmit","children","EditProfilePopup","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","id","placeholder","minLength","maxLength","required","onChange","target","value","EditAvatarPopup","useRef","onUpdateAvatar","current","ref","AddPlacePopup","image","options","this","_baseUrl","baseUrl","_headers","headers","url","fetch","credentials","then","_getResponseData","method","body","JSON","stringify","console","log","res","ok","Promise","reject","status","deleteLike","addLike","json","BASE_URL","_handleResponse","ImagePopup","Login","email","password","userAuthorisation","setUserAuthorisation","handleChange","onLogin","Register","userRegistration","setUserRegistration","onRegister","InfoTooltip","isSuccess","success","error","ProtectedRoute","Component","component","isLoggedIn","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","setCurrentUser","setCards","isRegistrationSuccessful","setIsRegistrationSuccessful","isTooltipOpen","setIsTooltipOpen","setIsLoggedIn","setUserEmail","history","useHistory","closeAllPopups","onTokenCheck","useCallback","push","catch","all","Api","getUserInfo","getInitialCards","user","Provider","auth","changeLikeCardStatus","newCard","state","c","deleteCard","filter","editUserInfo","updateAvatar","addNewCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.2b7f4042.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import React from 'react';\nimport { Route, Switch, Link } from 'react-router-dom';\nimport logo from '../images/logo.svg';\n\nfunction Header(props) {\n\n  return (\n    <header className=\"header\">\n      <img className=\"logo\" src={logo} alt=\"лого\" />\n      <div className=\"header__menu\">\n        <Switch>\n          <Route path=\"/sign-up\">\n            <Link className=\"header__menu-item\" to=\"/sign-in\">Войти</Link>\n          </Route>\n          <Route path=\"/sign-in\">\n            <Link className=\"header__menu-item\" to=\"/sign-up\">Регистрация</Link>\n          </Route>\n          <Route exact path=\"/\">\n            <p className=\"header__menu-email\">{props.userEmail}</p>\n            <button className=\"header__menu-item\" onClick={props.onSignOut}>Выйти</button>\n          </Route>\n        </Switch>\n      </div>\n    </header>\n  )\n}\n\nexport default Header","import React from 'react';\n\nconst defaultInfo = {\n    name: '',\n    about: '',\n    avatar: '',\n    _id: ''\n}\n\nexport const CurrentUserContext = React.createContext(defaultInfo);","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n\n    function handleClick() {\n        props.onCardClick(props.card);\n    }\n\n    const currentUser = React.useContext(CurrentUserContext);\n\n    function handleLikeClick() {\n        props.onCardLike(props.card)\n    }\n\n    function handleDeleteClick() {\n        props.onCardDelete(props.card)\n    }\n\n    const isOwn = props.card.owner === currentUser._id;\n\n    const cardDeleteButtonClassName = (\n        `element__bin ${isOwn ? 'element__bin_active' : ''}`\n    );\n\n    const isLiked = props.card.likes.some(i => i === currentUser._id);\n\n    const cardLikeButtonClassName = (`element__like ${isLiked ? 'element__like_active' : ''}`);\n\n    return (\n\n        <li className=\"element\">\n            <button className={cardDeleteButtonClassName} type=\"button\" aria-label=\"удалить\" onClick={handleDeleteClick}></button>\n            <img className=\"element__image\" src={props.card.link} alt=\"\" onClick={handleClick} />\n            <div className=\"element__text-container\">\n                <h3 className=\"element__title\">{props.card.name}</h3>\n                <button className={cardLikeButtonClassName} type=\"button\" aria-label=\"нравится\" onClick={handleLikeClick} >{props.card.likes.length}</button>\n            </div>\n        </li>\n    )\n}\n\nexport default Card","import React from 'react';\nimport Card from './Card';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction Main(props) {\n\n    const [isMouseOverAvatar, setIsMouseOverAvatar] = React.useState(false)\n    const currentUser = React.useContext(CurrentUserContext);\n\n\n    function handleMouseEnter() {\n        setIsMouseOverAvatar(true);\n    }\n\n    function handleMouseLeave() {\n        setIsMouseOverAvatar(false);\n    }\n\n    return (\n        <main className=\"content\">\n            <section className=\"profile\">\n                <div className=\"profile-info\">\n                    <img className=\"profile-info__avatar\" src={currentUser.avatar} alt=\"аватарка\" onMouseEnter={handleMouseEnter} />\n                    <button className={`profile-info__edit-avatar ${isMouseOverAvatar ? 'profile-info__edit-avatar_active' : ''}`} type=\"button\" aria-label=\"редактировать\" onClick={props.onEditAvatar} onMouseLeave={handleMouseLeave}></button>\n                    <div className=\"profile-info__info\">\n                        <h1 className=\"profile-info__name\">{currentUser.name}</h1>\n                        <p className=\"profile-info__about\">{currentUser.about}</p>\n                    </div>\n                    <button className=\"profile-info__edit-button\" type=\"button\" aria-label=\"редактировать\" onClick={props.onEditProfile}></button>\n                </div>\n                <button className=\"profile__add-button\" type=\"button\" aria-label=\"добавить\" onClick={props.onAddPlace}></button>\n            </section>\n            <section className=\"photo-grid\">\n                <ul className=\"photo-grid__list\">\n                    {\n                        props.cards.map((item) => {\n                            return (\n\n                                <Card key={item._id} card={item} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} />\n                            )\n\n                        })\n                    }\n                </ul>\n            </section>\n        </main>\n    )\n\n}\n\nexport default Main","import React from 'react';\n\nfunction Footer() {\n    return (\n        <footer className=\"footer\">\n            <p className=\"footer__copyright\">&copy; 2021 Mesto Russia</p>\n        </footer>\n    )\n}\n\nexport default Footer","import React from 'react';\n\nfunction PopupWithForm(props) {\n\n    return (\n\n        <div className={`pop-up ${props.isOpen ? 'pop-up_opened' : ''} pop-up_type_${props.name}`} >\n            <div className=\"pop-up__container\">\n                <button className=\"pop-up__close-button\" type=\"button\" aria-label=\"закрыть\" onClick={props.onClose}></button>\n                <h3 className=\"pop-up__title\">{props.title}</h3>\n                <form className=\"pop-up__admin\" name={props.name} onSubmit={props.onSubmit} /*noValidate*/>\n                    {props.children}\n                    <button type=\"submit\" className=\"pop-up__submit-button\">Сохранить</button>\n                </form>\n            </div>\n        </div>\n\n    )\n}\n\n\nexport default PopupWithForm","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\n\nfunction EditProfilePopup(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n\n    const [name, setName] = React.useState('');\n    const [description, setDescription] = React.useState('');\n\n    function handleChangeName(e) {\n        setName(e.target.value)\n    }\n\n    function handleChangeDescription(e) {\n        setDescription(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        props.onUpdateUser({\n            name,\n            about: description,\n        });\n    }\n\n    React.useEffect(() => {\n        setName(currentUser ? currentUser.name : '');\n        setDescription(currentUser ? currentUser.about : '');\n    }, [currentUser, props.isOpen]);\n\n    return (\n        <PopupWithForm title=\"Редактировать профиль\" name=\"edit\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\n            <div className=\"pop-up__input-container\">\n                <input type=\"text\" className=\"pop-up__item\" id=\"name\" name=\"name\" placeholder=\"Имя\" minLength=\"2\"\n                    maxLength=\"40\" required onChange={handleChangeName} value={name || ''} />\n                <span className=\"pop-up__error\" id=\"name-error\"></span>\n                <input type=\"text\" className=\"pop-up__item\" id=\"about\" name=\"about\" placeholder=\"О себе\"\n                    minLength=\"2\" maxLength=\"200\" required onChange={handleChangeDescription}  value={description || ''}\n                    />\n                <span className=\"pop-up__error\" id=\"about-error\"></span>\n            </div>\n        </PopupWithForm>\n    )\n\n}\n\nexport default EditProfilePopup","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup(props) {\n\n    const avatar = React.useRef();\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        props.onUpdateAvatar({\n            avatar: avatar.current.value,\n        });\n    }\n\n    return (\n        <PopupWithForm title=\"Обновить аватар\" name=\"edit-avatar\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit} >\n            <div className=\"pop-up__input-container\">\n                <input type=\"url\" className=\"pop-up__item\" id=\"avatar-image\" name=\"about\" placeholder=\"Ссылка на картинку\"\n                    required ref={avatar} />\n                <span className=\"pop-up__error\" id=\"avatar-image-error\"></span>\n            </div> </PopupWithForm>\n    )\n}\n\nexport default EditAvatarPopup","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\n\nfunction AddPlacePopup(props) {\n\n    const name = React.useRef(0);\n    const image = React.useRef(1);\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n       props.onAddPlace({\n        name: name.current.value,\n        link: image.current.value\n\n    })\n    }\n    \n    return (\n        <PopupWithForm title=\"Новое место\" name=\"add-element\" isOpen={props.isOpen} onClose={props.onClose} onSubmit={handleSubmit}>\n            <div className=\"pop-up__input-container\">\n                <input type=\"text\" className=\"pop-up__item\" id=\"cardname\" name=\"name\" placeholder=\"Название\"\n                    minLength=\"2\" maxLength=\"200\" required ref={name} />\n                <span className=\"pop-up__error\" id=\"cardname-error\"></span>\n                <input type=\"url\" className=\"pop-up__item\" id=\"image\" name=\"about\" placeholder=\"Ссылка на картинку\"\n                    required ref={image} />\n                <span className=\"pop-up__error\" id=\"image-error\"></span>\n            </div></PopupWithForm>\n    )\n}\n\nexport default AddPlacePopup","class Api {\n    constructor(options) {\n        this._baseUrl = options.baseUrl\n        this._headers = options.headers\n    }\n\n    // User\n\n    getUserInfo() {\n        const url = `${this._baseUrl}/users/me`\n        return fetch(url, {\n                headers: this._headers,\n                credentials: 'include',\n            })\n            .then(this._getResponseData);\n\n    }\n\n    editUserInfo({\n        name,\n        about\n    }) {\n        const url = `${this._baseUrl}/users/me`\n        return fetch(url, {\n                method: 'PATCH',\n                headers: this._headers,\n                credentials: 'include',\n                body: JSON.stringify({\n                    name: name,\n                    about: about\n                })\n            })\n            .then(this._getResponseData);\n\n    }\n\n    updateAvatar(link) {\n        const url = `${this._baseUrl}/users/me/avatar`\n        console.log(link)\n        return fetch(url, {\n                method: 'PATCH',\n                headers: this._headers,\n                credentials: 'include',\n                body: JSON.stringify({\n                    avatar: link.avatar,\n                })\n            })\n            .then(this._getResponseData);\n\n    }\n\n    // Cards\n\n    getInitialCards() {\n        const url = `${this._baseUrl}/cards`\n        return fetch(url, {\n                headers: this._headers,\n                credentials: 'include',\n            })\n            .then(this._getResponseData);\n\n    }\n\n    addNewCard({\n        name,\n        link\n    }) {\n        const url = `${this._baseUrl}/cards`\n        return fetch(url, {\n                method: 'POST',\n                headers: this._headers,\n                credentials: 'include',\n                body: JSON.stringify({\n                    name: name,\n                    link: link\n                })\n            })\n            .then(this._getResponseData);\n    }\n\n    deleteCard(id) {\n        const url = `${this._baseUrl}/cards/${id}`\n        return fetch(url, {\n                method: 'DELETE',\n                headers: this._headers,\n                credentials: 'include',\n            })\n            .then(res => {\n                if (res.ok) {\n                    return res;\n                }\n                return Promise.reject(`Ошибка: ${res.status}`);\n            });\n    }\n    changeLikeCardStatus(id, isLiked) {\n        if (isLiked) {\n            return this.deleteLike(id)\n        } else {\n            return this.addLike(id)\n        }\n    }\n\n\n    addLike(id) {\n        const url = `${this._baseUrl}/cards/${id}/likes`\n        return fetch(url, {\n                method: 'PUT',\n                headers: this._headers,\n                credentials: 'include',\n            })\n            .then(this._getResponseData);\n    }\n\n    deleteLike(id) {\n        const url = `${this._baseUrl}/cards/${id}/likes`\n        return fetch(url, {\n                method: 'DELETE',\n                headers: this._headers,\n                credentials: 'include',\n            })\n            .then(this._getResponseData);\n    }\n\n    _getResponseData(res) {\n        if (!res.ok) {\n            return Promise.reject(`Ошибка: ${res.status}`);\n        }\n        return res.json();\n    }\n\n}\n\nexport default new Api({\n    baseUrl: 'http://api.study.mesto.nomoredomains.rocks',\n    headers: {\n        'Content-Type': 'application/json'\n    }\n});","\n\nexport const BASE_URL = 'http://api.study.mesto.nomoredomains.rocks';\n\nexport const register = (email, password) => {\n  return fetch(`${BASE_URL}/signup`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    credentials: 'include',\n    body: JSON.stringify({\n        'email': email, \n        'password': password\n    })\n  })\n  .then(_handleResponse)\n};\n\nexport const login = (email, password) => {\n  return fetch (`${BASE_URL}/signin`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    credentials: 'include',\n    body: JSON.stringify({\n        'email': email, \n        'password': password\n    })\n  })\n}\n\nexport const checkToken = () => {\n  return fetch(`${BASE_URL}/users/me`, {\n    method: 'GET',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    credentials: 'include',\n  })\n  .then(_handleResponse);\n}\n\nexport const signOut = () => {\n  return fetch(`${BASE_URL}/signout`, {\n    method: 'POST',\n    credentials: 'include',\n  })\n  .then(_handleResponse);\n}\n\nfunction _handleResponse(res) {\n  if (!res.ok) {\n    return Promise.reject(`Ошибка: ${res.status}`);\n}\nreturn res.json();\n}","import React from 'react';\n\nfunction ImagePopup(props) {\n\n\n    return (\n        <div className={`pop-up pop-up_type_image ${props.card ? 'pop-up_opened' : ''}`}>\n            <div className=\"pop-up__container pop-up__container_type_image\">\n                <button className=\"pop-up__close-button\" type=\"button\" aria-label=\"закрыть\" onClick={props.onClose}></button>\n                <figure className=\"pop-up__figure\">\n                    <img src={props.card?.link} alt={props.card?.name} className=\"pop-up__image\" />\n                    <figcaption className=\"pop-up__image-caption\">{props.card ? props.card.name : '#'}</figcaption>\n                </figure>\n            </div>\n        </div>\n    )\n}\n\nexport default ImagePopup","import React, { useState } from 'react';\n\nfunction Login(props) {\n\n  const [userAuthorisation, setUserAuthorisation] = useState({\n    email: \"\",\n    password: \"\"\n  });\n\n\n  function handleChange(e) {\n    const { name, value } = e.target\n    setUserAuthorisation({ ...userAuthorisation, [name]: value })\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    const {email, password} = userAuthorisation\n\n    if (!email || !password) {\n      return;\n    }\n\n    props.onLogin(email, password)\n\n  }\n\n  return (\n    <div className=\"pop-up__container pop-up__container_type_auth\">\n      <p className=\"pop-up__title pop-up__title_type_auth\">\n        Вход\n      </p>\n      <form className=\"pop-up__admin\" onSubmit={handleSubmit}>\n        <div className=\"pop-up__input-container\">\n          <input className=\"pop-up__item pop-up__item_type_auth\" id=\"email\" name=\"email\" type=\"email\" placeholder=\"Email\" onChange={handleChange} value={userAuthorisation.email} />\n          <input className=\"pop-up__item pop-up__item_type_auth\" id=\"password\" name=\"password\" type=\"password\" placeholder=\"Пароль\" onChange={handleChange} value={userAuthorisation.password}/>\n          <button type=\"submit\" className=\"pop-up__submit-button pop-up__submit-button_type_auth\">Войти</button>\n        </div>\n      </form>\n\n    </div>\n  )\n}\n\nexport default Login","import React, { useState } from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n\n  const [userRegistration, setUserRegistration] = useState({\n    email: \"\",\n    password: \"\"\n  });\n\n\n  function handleChange(e) {\n    const { name, value } = e.target\n    setUserRegistration({ ...userRegistration, [name]: value })\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault()\n    const {email, password} = userRegistration\n    props.onRegister(email, password)\n  }\n\n  return (\n    <div className=\"pop-up__container pop-up__container_type_auth\">\n      <p className=\"pop-up__title pop-up__title_type_auth\">\n        Регистрация\n      </p>\n      <form className=\"pop-up__admin\" onSubmit={handleSubmit}>\n        <div className=\"pop-up__input-container\">\n          <input className=\"pop-up__item pop-up__item_type_auth\" id=\"email\" name=\"email\" type=\"email\" placeholder=\"Email\" value={userRegistration.email} onChange={handleChange} />\n          <input className=\"pop-up__item pop-up__item_type_auth\" id=\"password\" name=\"password\" type=\"password\" placeholder=\"Пароль\" value={userRegistration.password} onChange={handleChange} />\n          <button type=\"submit\" className=\"pop-up__submit-button pop-up__submit-button_type_auth\">Зарегистрироваться</button>\n        </div>\n      </form>\n      <div className=\"pop-up__sign-in\">\n        <p>Уже зарегистрированы?</p>\n        <Link to=\"sign-in\" className=\"pop-up__sign-in_type_link\">Войти</Link>\n      </div>\n    </div>\n  )\n}\n\nexport default Register","export default __webpack_public_path__ + \"static/media/success.1b6082f8.svg\";","export default __webpack_public_path__ + \"static/media/error.df8eddf6.svg\";","import React from 'react';\nimport success from '../images/success.svg';\nimport error from '../images/error.svg';\n\nfunction InfoTooltip(props) {\n    return (\n        <div className={`pop-up pop-up_type_image ${props.isOpen ? 'pop-up_opened' : ''}`}>\n            <div className=\"pop-up__container  pop-up__container_type_result-image\">\n                <button className=\"pop-up__close-button\" type=\"button\" aria-label=\"закрыть\" onClick={props.onClose} ></button>\n                <div className=\"pop-up__result\">\n                    <img src={props.isSuccess ? success : error} alt={props.isSuccess ? 'Галочка' : 'Крестик'} className=\"pop-up__image\" />\n                    <div className=\"pop-up__text\">\n                        <p>{props.isSuccess ? 'Вы успешно зарегистрировались!' : 'Что-то пошло не так!\\nПопробуйте ещё раз.'}</p>\n                    </div>\n                </div>\n            </div>\n        </div>\n    )\n}\n\nexport default InfoTooltip","import React from \"react\";\nimport { Route, Redirect } from \"react-router-dom\";\n\nconst ProtectedRoute = ({ component: Component, ...props }) => {\n  return (\n    <Route>\n      {() =>\n        props.isLoggedIn ? <Component {...props} /> : <Redirect to=\"./sign-in\" />\n      }\n    </Route>\n  );\n};\n\nexport default ProtectedRoute;","import React from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\n// import PopupWithForm from './PopupWithForm';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport Api from '../utils/api';\nimport * as auth from '../utils/auth.js';\n\nimport '../index.css'\nimport ImagePopup from './ImagePopup';\n\nimport Login from './Login';\nimport Register from './Register';\nimport InfoTooltip from './InfoTooltip';\n\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nimport ProtectedRoute from './ProtectedRoute';\n\nfunction App() {\n\n    const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n    const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n    const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n    const [selectedCard, setSelectedCard] = React.useState();\n    const [currentUser, setCurrentUser] = React.useState({});\n    const [cards, setCards] = React.useState([]);\n    const [isRegistrationSuccessful, setIsRegistrationSuccessful] = React.useState(true);\n    const [isTooltipOpen, setIsTooltipOpen] = React.useState(false);\n    const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n    const [userEmail, setUserEmail] = React.useState('')\n    const history = useHistory();\n\n    function handleEditProfileClick() {\n        setIsEditProfilePopupOpen(true);\n    }\n\n    function handleAddPlaceClick() {\n        setIsAddPlacePopupOpen(true);\n    }\n\n    function handleEditAvatarClick() {\n        setIsEditAvatarPopupOpen(true);\n    }\n\n    function closeAllPopups() {\n        setIsEditProfilePopupOpen(false);\n        setIsAddPlacePopupOpen(false);\n        setIsEditAvatarPopupOpen(false);\n        setSelectedCard();\n        setIsTooltipOpen(false);\n    }\n\n    function handleCardClick(card) {\n        setSelectedCard(card)\n    }\n\n    function handleUpdateUser(name, about) {\n        Api.editUserInfo(name, about)\n            .then(res => {\n                setCurrentUser(res)\n            })\n            .then(closeAllPopups)\n            .catch(() => console.log('error'))\n    }\n\n    function handleUpdateAvatar(link) {\n        Api.updateAvatar(link)\n            .then(res => {\n                setCurrentUser(res)\n            })\n            .then(closeAllPopups)\n            .catch(() => console.log('error'))\n    }\n\n    function handleCardLike(card) {\n        const isLiked = card.likes.some(i => i === currentUser._id);\n        Api.changeLikeCardStatus(card._id, isLiked)\n            .then((newCard) => {\n                setCards((state) => state.map((c) => c._id === card._id ? newCard : c));\n            })\n            .catch(() => console.log('error'))\n    }\n\n    function handleCardDelete(card) {\n        Api.deleteCard(card._id)\n            .then((newCard) => setCards((cards) => cards.filter((c) => {\n                if (c._id !== card._id) return newCard\n            })))\n            .catch(() => console.log('error'))\n    }\n\n    function handleAddPlaceSubmit(name, link) {\n        Api.addNewCard(name, link)\n            .then(newCard => {\n                setCards([newCard, ...cards])\n            })\n            .then(closeAllPopups)\n            .catch(() => console.log('error'))\n    }\n\n    function onLogin(email, password) {\n        auth.login(email, password)\n            .then(() => {\n                onTokenCheck()\n                // setIsLoggedIn(true);\n                // history.push('/');\n\n            })\n            .catch(() => console.log('error'))\n        // updateUserEmail()\n    }\n\n    function onRegister(email, password) {\n        auth.register(email, password)\n            .then(() => {\n                setIsRegistrationSuccessful(true);\n                history.push('/sign-in');\n            })\n            .catch(() => setIsRegistrationSuccessful(false))\n            .then(() => setIsTooltipOpen(true));\n    }\n\n    // function updateUserEmail() {\n    //     let token = localStorage.getItem('jwt')\n    //     auth.checkToken(token)\n    //         .then((res) => setUserEmail(res.data.email))\n    //         .catch((err) => console.log(err))\n    // }\n\n    function handleSignOut() {\n        auth.signOut()\n        setIsLoggedIn(false)\n    }\n\n    const onTokenCheck = React.useCallback(() =>  {\n\n        auth.checkToken()\n            .then(res => {\n                setIsLoggedIn(res != null)\n                setUserEmail(res.email)\n                history.push('/')\n            })\n            .catch(() => console.log('error'))\n\n    }, [history])\n\n    React.useEffect(() => {\n        if (!isLoggedIn) { return }\n\n        Promise.all([Api.getUserInfo(), Api.getInitialCards()])\n            .then(([user, cards]) => {\n                setCurrentUser(user)\n                setCards(cards)\n            })\n            .catch(() => console.log('error'))\n    }, [isLoggedIn]);\n\n    React.useEffect(() => {      \n            onTokenCheck()\n        }, [onTokenCheck] );\n\n    return (\n        <div className=\"page__container\">\n            <CurrentUserContext.Provider value={currentUser}>\n                <Header userEmail={userEmail} onSignOut={handleSignOut} />\n                <Switch>\n\n                    <Route path=\"/sign-up\">\n                        <Register\n                            onRegister={onRegister}\n                        />\n                    </Route>\n                    <Route path=\"/sign-in\">\n                        <Login\n                            onLogin={onLogin}\n                            onTokenCheck={onTokenCheck}\n                        />\n                    </Route>\n                    <ProtectedRoute\n                        exact path=\"/\"\n                        isLoggedIn={isLoggedIn}\n                        component={Main}\n                        onEditAvatar={handleEditAvatarClick}\n                        onEditProfile={handleEditProfileClick}\n                        onAddPlace={handleAddPlaceClick}\n                        onCardClick={handleCardClick}\n                        cards={cards}\n                        onCardLike={handleCardLike}\n                        onCardDelete={handleCardDelete}\n                    >\n                    </ProtectedRoute>\n                </Switch>\n                <Footer />\n                <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser} />\n                <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar} />\n                <AddPlacePopup isOpen={isAddPlacePopupOpen} onClose={closeAllPopups} onAddPlace={handleAddPlaceSubmit} />\n                {/* <PopupWithForm title=\"Вы уверены?\" name=\"remove-card\">\n                    <div className=\"pop-up__container\">\n                        <button className=\"pop-up__close-button\" type=\"button\" aria-label=\"закрыть\"></button>\n                        <h3 className=\" pop-up__title\">Вы уверены?</h3>\n                        <button type=\"button\" className=\"pop-up__submit-button\">Да</button>\n                    </div></PopupWithForm> */}\n                <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n                <InfoTooltip\n                    isOpen={isTooltipOpen}\n                    isSuccess={isRegistrationSuccessful}\n                    onClose={closeAllPopups}\n                />\n\n            </CurrentUserContext.Provider>\n        </div>\n\n    );\n}\n\n\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n    <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}